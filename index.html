<script>
  // Arranca el VIAJE desde 1:01 y genera el campo de estrellas del viaje
  document.addEventListener('DOMContentLoaded', () => {
    const audio = document.getElementById('musica');
    const btn   = document.getElementById('playBtn');

    btn.addEventListener('click', async () => {
      try { audio.currentTime = 61; await audio.play(); } catch(e){}
      window.Viaje && window.Viaje.start();

      // === genera estrellas si aÃºn no existen ===
      setTimeout(() => {
        const far  = document.getElementById('layer-far');
        const mid  = document.getElementById('layer-mid');
        const near = document.getElementById('layer-near');
        if (!far || !mid || !near) return;

        // si ya hay estrellas, no duplicar
        if (near.querySelector('.star')) return;

        function makeStars(container, count, sizeVar){
          const frag = document.createDocumentFragment();
          for (let i=0;i<count;i++){
            const s = document.createElement('i');
            s.className = 'star';
            s.style.left = (Math.random()*100)+'%';
            s.style.top  = (Math.random()*100)+'%';
            s.style.setProperty('--s', sizeVar);
            s.style.setProperty('--tw', (1.8 + Math.random()*2.2).toFixed(2) + 's');
            s.style.opacity = (0.55 + Math.random()*0.35).toFixed(2);
            frag.appendChild(s);
          }
          container.appendChild(frag);
        }

        makeStars(far,  120, 'var(--vj-star-far)');
        makeStars(mid,   90, 'var(--vj-star-mid)');
        makeStars(near,  60, 'var(--vj-star-near)');
      }, 0);
    });
  });
</script>






